<?xml version="1.0"?>
<component
        type="impl"
        name="XMP_saveVectorB"
        description="Implementation component of saveVectorB"
        abstract="XMP_saveVectorB">
	<impl lang="XMP" nodes="CPU:(DISTVECT)">
<header>
  <templates>
    <template name="p" format="block" size="SIZE" />
  </templates>
  <distribute>
    <param template="p" name="vect(SIZE)" align="[i]:(i)" />
  </distribute>
		<![CDATA[
#include <stdlib.h>
#include <string.h>
#include <stdio.h>
#include <xmp_io.h>
]]>
</header>
		<source>
		<![CDATA[

	int i,j;
	char temp[10] = "";
	char buf[100];
	char nameFile[50] = "DIR/init/b";
	sprintf(temp, "%d", index);
	strcat(nameFile, temp);

	xmp_file_t * file;

	file = xmp_fopen_all(nameFile,"w");

#pragma xmp loop (i) on p(i)
	for(i = 0 ; i < SIZE ; i++) {
                sprintf(buf,"%d %lf\n",i,vect[i]);
		xmp_fwrite_shared(file,buf,strlen(buf),1);
	}

	xmp_fclose_all(file);

        ]]>
        		</source>
		<footer />
	</impl>
</component>

